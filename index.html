<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>เกมตกปลา HSK</title>
<style>
    body {
        margin: 0;
        background: #a3d5ff;
        font-family: "Prompt", sans-serif;
        user-select: none;
    }

    /* เมนู */
    #main-menu {
        text-align: center;
        padding-top: 40px;
    }

    .level-btn {
        font-size: 20px;
        margin: 10px;
        padding: 10px 30px;
        background: #0284c7;
        color: white;
        border: none;
        border-radius: 10px;
        cursor: pointer;
    }

    /* ฉากหลังเกม */
    #fishing-game {
        display: none;
        width: 100%;
        height: 100vh;
        position: relative;
        overflow: hidden;
        background: url("https://cdn.pixabay.com/photo/2017/03/27/14/56/sea-2179183_1280.jpg");
        background-size: cover;
    }

    #fishing-area {
        width: 100%;
        height: 100%;
        position: relative;
    }

    /* ปลา */
    .fish {
        position: absolute;
        cursor: pointer;
        transition: transform 0.2s;
    }
    .fish:hover {
        transform: scale(1.2);
    }

    /* แถบคะแนน */
    #hud {
        position: absolute;
        top: 10px;
        left: 10px;
        font-size: 22px;
        color: white;
        background: rgba(0, 0, 0, 0.4);
        padding: 10px 20px;
        border-radius: 10px;
    }

    #options-container {
        position: absolute;
        bottom: 60px;
        left: 50%;
        transform: translateX(-50%);
        text-align: center;
        width: 80%;
    }

    .option-btn {
        display: block;
        margin: 10px auto;
        padding: 10px;
        background: #fff;
        border: 2px solid #333;
        border-radius: 10px;
        width: 80%;
        font-size: 22px;
        cursor: pointer;
    }

    .option-btn:hover {
        background: #cce5ff;
    }

    #back-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        background: red;
        color: white;
        padding: 10px 20px;
        border-radius: 10px;
        cursor: pointer;
    }

</style>
</head>

<body>

<!-- เมนูหลัก -->
<div id="main-menu">
    <h1>เกมตกปลา HSK 2–3</h1>
    <p>เลือกระดับคำศัพท์</p>

    <button class="level-btn" onclick="startGame('hsk2')">HSK 2</button>
    <button class="level-btn" onclick="startGame('hsk3')">HSK 3</button>
</div>

<!-- เกมตกปลา -->
<div id="fishing-game">
    <div id="hud">
        คะแนน: <span id="score">0</span><br>
        เวลา: <span id="timer">60</span> วินาที
    </div>

    <button id="back-btn" onclick="backToMenu()">กลับเมนู</button>

    <div id="fishing-area"></div>

    <div id="options-container"></div>
</div>

<!-- เสียง -->
<audio id="sound-correct" src="https://cdn.pixabay.com/audio/2022/03/15/audio_4b89f33e67.mp3"></audio>
<audio id="sound-wrong" src="https://cdn.pixabay.com/audio/2022/03/15/audio_0f7b17a5c1.mp3"></audio>
<audio id="sound-catch" src="https://cdn.pixabay.com/audio/2021/08/04/audio_6f3b43c9b2.mp3"></audio>

<script>

let score = 0;
let timeLeft = 60;
let timerInterval;
let fishInterval;
let currentAnswer = "";
let currentLevel = "";

/* คลังคำศัพท์ */
const vocab = {

    hsk2: [
        {cn: "运动", th: "ออกกำลังกาย"},
        {cn: "丈夫", th: "สามี"},
        {cn: "便宜", th: "ถูก"},
        {cn: "房间", th: "ห้อง"},
        {cn: "机场", th: "สนามบิน"},
        {cn: "去年", th: "ปีที่แล้ว"},
        {cn: "生病", th: "ป่วย"},
        {cn: "孩子", th: "เด็ก"},
        {cn: "正在", th: "กำลัง..."},
        {cn: "可能", th: "อาจจะ"},
        {cn: "意思", th: "ความหมาย"},
        {cn: "哥哥", th: "พี่ชาย"},
        {cn: "妹妹", th: "น้องสาว"},
        {cn: "弟弟", th: "น้องชาย"},
        {cn: "姐姐", th: "พี่สาว"},
        {cn: "快乐", th: "มีความสุข"},
        {cn: "准备", th: "เตรียมตัว"},
        {cn: "颜色", th: "สี"},
        {cn: "票", th: "ตั๋ว"},
        {cn: "生日", th: "วันเกิด"},
        {cn: "时间", th: "เวลา"},
        {cn: "旅游", th: "ท่องเที่ยว"},
        {cn: "事情", th: "เรื่องราว"},
        {cn: "外面", th: "ข้างนอก"},
        {cn: "踢足球", th: "เตะฟุตบอล"},
        {cn: "告诉", th: "บอก"},
        {cn: "送", th: "มอบให้"},
        {cn: "长", th: "ยาว"},
        {cn: "懂", th: "เข้าใจ"},
        {cn: "忙", th: "ยุ่ง"},
        {cn: "穿", th: "ใส่เสื้อผ้า"},
        {cn: "洗", th: "ล้าง"},
        {cn: "累", th: "เหนื่อย"},
        {cn: "晴", th: "ท้องฟ้าแจ่มใส"},
        {cn: "阴", th: "มีเมฆ"},
        {cn: "近", th: "ใกล้"},
        {cn: "远", th: "ไกล"},
        {cn: "慢", th: "ช้า"},
        {cn: "快", th: "เร็ว"},
        {cn: "红", th: "แดง"},
        {cn: "黑", th: "ดำ"},
        {cn: "白", th: "ขาว"},
        {cn: "贵", th: "แพง"},
        {cn: "雪", th: "หิมะ"},
        {cn: "牛奶", th: "นม"},
        {cn: "鸡蛋", th: "ไข่"},
        {cn: "西瓜", th: "แตงโม"},
        {cn: "药", th: "ยา"},
        {cn: "牛肉", th: "เนื้อวัว"},
        {cn: "羊肉", th: "เนื้อแกะ"},
        {cn: "鱼", th: "ปลา"},
        {cn: "咖啡", th: "กาแฟ"},
        {cn: "公司", th: "บริษัท"},
        {cn: "教室", th: "ห้องเรียน"},
        {cn: "房子", th: "บ้าน"},
        {cn: "路", th: "ถนน"},
        {cn: "问", th: "ถาม"},
        {cn: "完", th: "เสร็จ"},
        {cn: "再", th: "อีกครั้ง"},
        {cn: "一下", th: "สักครู่"},
        {cn: "每", th: "ทุกๆ"},
        {cn: "大家", th: "ทุกคน"},
        {cn: "希望", th: "หวังว่า"},
        {cn: "第一", th: "อันดับหนึ่ง"},
        {cn: "找", th: "หา"},
        {cn: "进", th: "เข้า"},
        {cn: "出", th: "ออก"},
        {cn: "玩", th: "เล่น"},
        {cn: "帮助", th: "ช่วย"}
    ],

    hsk3: [
        {cn:"阿姨", th:"คุณป้า"},
        {cn:"啊", th:"คำลงท้าย"},
        {cn:"班", th:"ชั้นเรียน"},
        {cn:"办法", th:"วิธีการ"},
        {cn:"帮助", th:"ช่วยเหลือ"},
        {cn:"包", th:"กระเป๋า"},
        {cn:"饱", th:"อิ่ม"},
        {cn:"北方", th:"ภาคเหนือ"},
        {cn:"鼻子", th:"จมูก"},
        {cn:"比较", th:"ค่อนข้าง"},
        {cn:"必须", th:"ต้อง"},
        {cn:"变化", th:"การเปลี่ยนแปลง"},
        {cn:"别人", th:"คนอื่น"},
        {cn:"冰箱", th:"ตู้เย็น"},
        {cn:"菜单", th:"เมนูอาหาร"},
        {cn:"参加", th:"เข้าร่วม"},
        {cn:"草", th:"หญ้า"},
        {cn:"层", th:"ชั้นของอาคาร"},
        {cn:"差", th:"แย่/ขาด"},
        {cn:"成绩", th:"ผลการเรียน"},
        {cn:"城市", th:"เมือง"},
        {cn:"除了", th:"นอกจาก"},
        {cn:"春", th:"ฤดูใบไม้ผลิ"},
        {cn:"词语", th:"คำศัพท์"},
        {cn:"出发", th:"ออกเดินทาง"},
        {cn:"打扫", th:"ทำความสะอาด"},
        {cn:"打算", th:"วางแผน"},
        {cn:"带", th:"พา/นำ"},
        {cn:"担心", th:"กังวล"},
        {cn:"地", th:"อย่าง..."},
        {cn:"灯", th:"โคมไฟ"},
        {cn:"地方", th:"สถานที่"},
        {cn:"地铁", th:"รถไฟใต้ดิน"},
        {cn:"地图", th:"แผนที่"},
        {cn:"电梯", th:"ลิฟต์"},
        {cn:"电子邮件", th:"อีเมล"},
        {cn:"东", th:"ทิศตะวันออก"},
        {cn:"冬", th:"ฤดูหนาว"},
        {cn:"动物", th:"สัตว์"},
        {cn:"段", th:"ช่วง"},
        {cn:"锻炼", th:"ออกกำลังกาย"},
        {cn:"多么", th:"มากแค่ไหน"},
        {cn:"饿", th:"หิว"},
        {cn:"耳朵", th:"หู"},
        {cn:"发", th:"ส่ง"},
        {cn:"发现", th:"ค้นพบ"},
        {cn:"放", th:"วาง"},
        {cn:"放心", th:"วางใจ"},
        {cn:"分", th:"คะแนน/นาที"},
        {cn:"附近", th:"บริเวณใกล้เคียง"},
        {cn:"复习", th:"ทบทวน"},
        {cn:"干净", th:"สะอาด"},
        {cn:"感冒", th:"เป็นหวัด"},
        {cn:"敢", th:"กล้า"},
        {cn:"跟", th:"กับ"},
        {cn:"根据", th:"ตาม..."},
        {cn:"更", th:"ยิ่งกว่า"},
        {cn:"故事", th:"เรื่องเล่า"},
        {cn:"刮风", th:"ลมพัด"},
        {cn:"关系", th:"ความสัมพันธ์"},
        {cn:"关心", th:"เอาใจใส่"},
        {cn:"关于", th:"เกี่ยวกับ"},
        {cn:"国家", th:"ประเทศ"},
        {cn:"果汁", th:"น้ำผลไม้"},
        {cn:"过去", th:"อดีต"},
        {cn:"还是", th:"หรือว่า"},
        {cn:"害怕", th:"กลัว"},
        {cn:"河", th:"แม่น้ำ"},
        {cn:"黑板", th:"กระดานดำ"},
        {cn:"护照", th:"พาสปอร์ต"},
        {cn:"花", th:"ดอกไม้"},
        {cn:"花园", th:"สวน"},
        {cn:"画", th:"วาดรูป"},
        {cn:"坏", th:"เสีย"},
        {cn:"欢迎", th:"ยินดีต้อนรับ"},
        {cn:"环境", th:"สิ่งแวดล้อม"},
        {cn:"或者", th:"หรือ (ประโยคบอกเล่า)"},
        {cn:"会议", th:"การประชุม"},
        {cn:"火", th:"ไฟ"},
        {cn:"机会", th:"โอกาส"},
        {cn:"几乎", th:"เกือบจะ"},
        {cn:"记得", th:"จำได้"},
        {cn:"检查", th:"ตรวจสอบ"},
        {cn:"简单", th:"ง่าย"},
        {cn:"健康", th:"สุขภาพ"},
        {cn:"讲", th:"พูด/บอก"},
        {cn:"脚", th:"เท้า"}
    ]
};

/* ปลาหลายแบบ */
const fishImages = [
    "https://pngimg.com/uploads/fish/fish_PNG25167.png",
    "https://pngimg.com/uploads/fish/fish_PNG25158.png",
    "https://pngimg.com/uploads/fish/fish_PNG25153.png"
];

/* เริ่มเกม */
function startGame(level) {
    currentLevel = level;
    document.getElementById("main-menu").style.display = "none";
    document.getElementById("fishing-game").style.display = "block";

    score = 0;
    timeLeft = 60;
    updateScore();
    updateTimer();

    timerInterval = setInterval(countdown, 1000);
    fishInterval = setInterval(spawnFish, 1500);
}

/* ตัวจับเวลา */
function countdown() {
    timeLeft--;
    updateTimer();
    if (timeLeft <= 0) endGame();
}

/* อัปเดต HUD */
function updateScore() {
    document.getElementById("score").innerText = score;
}
function updateTimer() {
    document.getElementById("timer").innerText = timeLeft;
}

/* สุ่มปลา */
function spawnFish() {
    const fish = document.createElement("img");
    fish.src = fishImages[Math.floor(Math.random()*fishImages.length)];
    fish.className = "fish";
    fish.style.width = "100px";
    fish.style.top = Math.random() * 70 + "%";
    fish.style.left = "-150px";

    const area = document.getElementById("fishing-area");
    area.appendChild(fish);

    let x = -150;
    const swim = setInterval(() => {
        x += 3;
        fish.style.left = x + "px";

        if (x > window.innerWidth) {
            clearInterval(swim);
            fish.remove();
        }
    }, 20);

    fish.onclick = () => {
        document.getElementById("sound-catch").play();
        fish.remove();
        generateQuestion();
    };
}

/* แสดงคำถามเป็นตัวเลือก 4 ข้อ */
function generateQuestion() {
    const list = vocab[currentLevel];
    const word = list[Math.floor(Math.random()*list.length)];

    currentAnswer = word.th;

    let options = [word.th];

    while (options.length < 4) {
        let r = list[Math.floor(Math.random()*list.length)].th;
        if (!options.includes(r)) options.push(r);
    }

    options.sort(() => Math.random() - 0.5);

    let html = `<h2 style="color:white;text-shadow:2px 2px 3px #000">${word.cn}</h2>`;

    options.forEach(op => {
        html += `<button class="option-btn" onclick="checkAnswer('${op}')">${op}</button>`;
    });

    document.getElementById("options-container").innerHTML = html;
}

/* ตรวจคำตอบ */
function checkAnswer(choice) {
    if (choice === currentAnswer) {
        score += 10;
        document.getElementById("sound-correct").play();
    } else {
        document.getElementById("sound-wrong").play();
    }
    updateScore();
    document.getElementById("options-container").innerHTML = "";
}

/* จบเกม */
function endGame() {
    clearInterval(timerInterval);
    clearInterval(fishInterval);

    alert("จบเกม! คุณได้คะแนน: " + score);
    backToMenu();
}

/* กลับเมนู */
function backToMenu() {
    document.getElementById("fishing-game").style.display = "none";
    document.getElementById("main-menu").style.display = "block";

    clearInterval(timerInterval);
    clearInterval(fishInterval);

    document.getElementById("fishing-area").innerHTML = "";
    document.getElementById("options-container").innerHTML = "";
}

</script>

</body>
</html>
